<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en_us"><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" hreflang="en_us" /><updated>2022-04-10T19:23:15+00:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">codercuy</title><author><name>Moises Gamio</name></author><entry><title type="html">Understanding Object-Oriented Programming concepts</title><link href="http://localhost:4000/understanding-oop-concepts/" rel="alternate" type="text/html" title="Understanding Object-Oriented Programming concepts" /><published>2022-04-02T00:00:00+00:00</published><updated>2022-04-02T00:00:00+00:00</updated><id>http://localhost:4000/understanding-oop-concepts</id><content type="html" xml:base="http://localhost:4000/understanding-oop-concepts/"><![CDATA[<p>Object-oriented concepts give you a solid foundation for making critical design decisions.</p>

<h2 id="class">Class</h2>

<p>A class is a template or prototype that describes what an object will be. It defines its attributes(data) and behavior(methods). We must design a class before creating an object.</p>

<h2 id="object">Object</h2>

<p>An object is an instance of a class. When we create an object, we create real-world entities such as auto, bicycles, or dogs with their own attributes and own behaviors.</p>

<p>In Java we instantiate an object via the <em>new</em> keyword. When you design a class follow the <a href="https://codersite.dev/solid-principles-the-definitive-guide/">Single Resposibility Principle (SRP)</a></p>

<h2 id="abstraction">Abstraction</h2>

<p>Abstraction allows an object telling to its users what an application does instead of how it does it. You can see the essential buttons in your TV remote control, but you don’t care what happens behind when you press one of these buttons. In Java, we create abstractions via Interfaces and Abstract classes.</p>

<h2 id="encapsulation-and-data-hiding">Encapsulation and Data Hiding</h2>

<p>Restricting access to specific attributes and methods is called <em>data hiding</em>. Objects should not manipulate the data of other objects.</p>

<p>Encapsulation is the action to combine the data and methods in the same entity. In this way, we control access to the data in the object.</p>

<h2 id="inheritance">Inheritance</h2>

<p>Inheritance is a process in which a class inherits the attributes and methods of another class.</p>

<p>Inheritance provides the ability to create new classes with new functionalities maintaining the functionalities inherited. In this way, it promotes code reusability.</p>

<p>In Java, we create inheritance between classes via the <em>extends</em> keyword.</p>

<h2 id="polymorphism">Polymorphism</h2>

<p>Polymorphism means many shapes and is coupled to inheritance. For example, a Shape class defines a <em>draw</em> method, but Square and Circle’s subclasses will implement it differently.</p>

<h2 id="advantanges-of-object-oriented-programming">Advantanges of object-oriented programming</h2>

<ul>
  <li>Your program focus on data, not on functions. You create a program using objects, not functions.</li>
  <li>You define methods to control the access to its data.</li>
  <li>Objects communicate through methods - messages</li>
  <li>Application adapts to new changes.</li>
  <li>Objects has unique responsibilities.</li>
  <li>You don’t define global data. Every object contains its data.</li>
</ul>

<p>Learn how to use these concepts in <a href="https://codersite.dev/open-closed-principle/">SOLID design principles</a>.</p>]]></content><author><name>moises</name></author><category term="oop" /><category term="tutorial" /><summary type="html"><![CDATA[Object-oriented concepts give you a solid foundation for making critical design decisions.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/images/oop.jpg" /><media:content medium="image" url="http://localhost:4000/assets/images/oop.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Spring Boot and OAuth2</title><link href="http://localhost:4000/spring-boot-oauth2/" rel="alternate" type="text/html" title="Spring Boot and OAuth2" /><published>2022-03-20T00:00:00+00:00</published><updated>2022-03-20T00:00:00+00:00</updated><id>http://localhost:4000/spring%20boot%20oauth2</id><content type="html" xml:base="http://localhost:4000/spring-boot-oauth2/"><![CDATA[<p>This tutorial will show how to integrate OAuth2 with Spring Security in a Spring Boot application.</p>

<p>The Spring Boot application I am going to use is based on my previous article: <a href="https://codersite.dev/documenting-rest-api-openapi3/">Documenting a SpringBoot REST API with OpenAPI 3</a></p>

<h2 id="oauth">OAuth</h2>

<p><a href="https://datatracker.ietf.org/doc/html/rfc6749">OAuth</a> is an authorization framework many companies use to secure access to its protected resources. It performs this by using access tokens.</p>

<p>The token represents a delegated right of access on behalf of the resource owner.</p>

<h2 id="roles">Roles</h2>

<p>OAuth defines four roles</p>

<ul>
  <li>
    <p>Resource Owner – the user who grants access to a protected resource.</p>
  </li>
  <li>
    <p>Resource Server – store user’s data and http services and respond to protected resource requests using access tokens.</p>
  </li>
  <li>
    <p>Client – the application which require access to protected resources on behalf of the resource owner and with its authorization.</p>
  </li>
  <li>
    <p>Authorization Server – responsible for authenticating user’s identity and gives an authorization token.</p>
  </li>
</ul>

<h2 id="authorization-grant">Authorization grant</h2>

<p>An authorization grant is a credential representing the resource owner’s authorization used by the client to obtain an access token.</p>

<p>OAuth defines four grant types.</p>

<ul>
  <li>
    <p>Authorization Code, for web apps that are server-side apps</p>
  </li>
  <li>
    <p>Implicit, optimized for clients implemented in a browser using a scripting language such as JavaScript</p>
  </li>
  <li>
    <p>Resource Owner Password Credentials, used when there is a high degree of trust between the resource owner and the client</p>
  </li>
  <li>
    <p>Client Credentials, used when the client is requesting access to protected resources based on an authorization previously arranged with the authorization server.</p>
  </li>
</ul>

<p>The  Client Credentials grant type is the most appropriate for server-to-server applications, such as typical B2B interactions.</p>

<h3 id="gettin-started">Gettin Started</h3>

<p>We add the Spring oauth dependency to our pom.xml file.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="nf">springframework</span><span class="p">.</span><span class="nf">security</span><span class="p">.</span><span class="nf">oauth</span><span class="p">.</span><span class="nf">boot</span><span class="o">&lt;</span><span class="sr">/groupId&gt;
  &lt;artifactId&gt;spring-security-oauth2-autoconfigure&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">1</span><span class="o">&lt;</span><span class="sr">/version&gt;
&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span></code></pre></figure>

<h3 id="enable-authorization-server-support">Enable Authorization Server Support</h3>

<p>We open the main application class and add @EnableAuthorizationServer to enable the support for the authorization server.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vi">@EnableAuthorizationServer</span>
<span class="vi">@SpringBootApplication</span>
<span class="kp">public</span> <span class="k">class</span> <span class="nc">OpenapiApplication</span> <span class="p">{</span>
	<span class="kp">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="no">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
		<span class="no">SpringApplication</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="no">OpenapiApplication</span><span class="p">.</span><span class="nf">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>@EnableAuthorizationServer enables the client credentials grant type by default.</p>

<h3 id="creating-clientid-and-client-secret">Creating ClientId and Client Secret</h3>

<p>Open/create the resources/application.yml file and add the following properties:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">security:
  oauth2:
    client:
      </span><span class="n">client</span><span class="o">-</span><span class="ss">id: </span><span class="n">codercuy</span><span class="o">-</span><span class="n">client</span>
      <span class="n">client</span><span class="o">-</span><span class="ss">secret: </span><span class="n">strong</span><span class="o">-</span><span class="n">secret</span>
      <span class="ss">scope:
        </span><span class="o">-</span> <span class="n">read</span>
        <span class="o">-</span> <span class="n">write</span></code></pre></figure>

<p>Now, we need to tell Spring which endpoints -resources- must be authenticated. Otherwise, all requests will skip security.</p>

<h3 id="enable-resource-server-support">Enable Resource Server Support</h3>

<p>Create a class that extends ResourceServerConfigurerAdapter and add the following code.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vi">@Configuration</span>
<span class="vi">@EnableResourceServer</span>
<span class="kp">public</span> <span class="k">class</span> <span class="nc">OAuth2ResourceServer</span> <span class="n">extends</span> <span class="no">ResourceServerConfigurerAdapter</span>
<span class="p">{</span>
  <span class="vi">@Override</span>
  <span class="kp">public</span> <span class="n">void</span> <span class="n">configure</span><span class="p">(</span><span class="no">HttpSecurity</span> <span class="n">http</span><span class="p">)</span> <span class="n">throws</span> <span class="no">Exception</span> <span class="p">{</span>
    <span class="n">http</span>
            <span class="p">.</span><span class="nf">authorizeRequests</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">antMatchers</span><span class="p">(</span><span class="s2">"/api/**"</span><span class="p">).</span><span class="nf">authenticated</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">antMatchers</span><span class="p">(</span><span class="s2">"/"</span><span class="p">).</span><span class="nf">permitAll</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now, run the main application.</p>

<p><a href="http://localhost:8080/swagger-ui.html" target="_blank">http://localhost:8080/swagger-ui.html</a></p>

<p>And try to insert a book (Try out button). In bookAuthorization parameter write anything (“key” for example).</p>

<p>Then you receive an error.</p>

<p><img src="/assets/images/oauth2Post.jpg" alt="oauth2Post" class="img-responsive" /></p>

<p>Why this happens? Well, we need to tell openapi that configure security.</p>

<h3 id="configure-openapi-and-oauth2">Configure openapi and oauth2</h3>

<p>Open OpenApiConfig class and add the new code.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vi">@Configuration</span>
<span class="kp">public</span> <span class="k">class</span> <span class="nc">OpenApiConfig</span> <span class="p">{</span>

  <span class="vi">@Bean</span>
  <span class="kp">public</span> <span class="no">OpenAPI</span> <span class="n">customOpenAPI</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">new</span> <span class="no">OpenAPI</span><span class="p">()</span>
        <span class="p">.</span><span class="nf">components</span><span class="p">(</span><span class="n">new</span> <span class="no">Components</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">addSecuritySchemes</span><span class="p">(</span><span class="s2">"spring_oauth"</span><span class="p">,</span> <span class="n">new</span> <span class="no">SecurityScheme</span><span class="p">()</span>
                        <span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="no">SecurityScheme</span><span class="o">.</span><span class="no">Type</span><span class="o">.</span><span class="no">OAUTH2</span><span class="p">)</span>
                        <span class="p">.</span><span class="nf">description</span><span class="p">(</span><span class="s2">"Oauth2 flow"</span><span class="p">)</span>
                        <span class="p">.</span><span class="nf">flows</span><span class="p">(</span><span class="n">new</span> <span class="no">OAuthFlows</span><span class="p">()</span>
                                <span class="p">.</span><span class="nf">clientCredentials</span><span class="p">(</span><span class="n">new</span> <span class="no">OAuthFlow</span><span class="p">()</span>
                                        <span class="p">.</span><span class="nf">tokenUrl</span><span class="p">(</span><span class="s2">"http://localhost:8080"</span> <span class="o">+</span> <span class="s2">"/oauth/token"</span><span class="p">)</span>
                                        <span class="p">.</span><span class="nf">scopes</span><span class="p">(</span><span class="n">new</span> <span class="no">Scopes</span><span class="p">()</span>
                                                <span class="p">.</span><span class="nf">addString</span><span class="p">(</span><span class="s2">"read"</span><span class="p">,</span> <span class="s2">"for read operations"</span><span class="p">)</span>
                                                <span class="p">.</span><span class="nf">addString</span><span class="p">(</span><span class="s2">"write"</span><span class="p">,</span> <span class="s2">"for write operations"</span><span class="p">)</span>
                                        <span class="p">))))</span>
        <span class="p">)</span>
            <span class="p">.</span><span class="nf">security</span><span class="p">(</span><span class="no">Arrays</span><span class="p">.</span><span class="nf">asList</span><span class="p">(</span>
                    <span class="n">new</span> <span class="no">SecurityRequirement</span><span class="p">().</span><span class="nf">addList</span><span class="p">(</span><span class="s2">"spring_oauth"</span><span class="p">)))</span>
        <span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="n">new</span> <span class="no">Info</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="s2">"Book Application API"</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">description</span><span class="p">(</span><span class="s2">"This is a sample Spring Boot RESTful service using springdoc-openapi and OpenAPI 3."</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">termsOfService</span><span class="p">(</span><span class="s2">"terms"</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">contact</span><span class="p">(</span><span class="n">new</span> <span class="no">Contact</span><span class="p">().</span><span class="nf">email</span><span class="p">(</span><span class="s2">"codersitedev@gmail.com"</span><span class="p">).</span><span class="nf">name</span><span class="p">(</span><span class="s2">"Developer: Moises Gamio"</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">license</span><span class="p">(</span><span class="n">new</span> <span class="no">License</span><span class="p">().</span><span class="nf">name</span><span class="p">(</span><span class="s2">"GNU"</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">version</span><span class="p">(</span><span class="s2">"2.0"</span><span class="p">)</span>
        <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now, rerun the main application, and we can see a new green button called Authorize. Then enter the credentials and the scope.</p>

<p><img src="/assets/images/oauth2authorize.jpg" alt="oauth2authorize" class="img-responsive" /></p>

<p>Close the pop-up and try out again to insert a book.</p>

<p><img src="/assets/images/oauth2PostOK.jpg" alt="oauth2PostOK" class="img-responsive" /></p>

<p>Yes, you did it!</p>

<p>Now, your endpoints are secured.</p>]]></content><author><name>moises</name></author><category term="Jekyll" /><category term="tutorial" /><summary type="html"><![CDATA[This tutorial will show how to integrate OAuth2 with Spring Security in a Spring Boot application.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/images/oauthRoles.jpg" /><media:content medium="image" url="http://localhost:4000/assets/images/oauthRoles.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>